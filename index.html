<!DOCTYPE html>
<html>

<head>
  <title>Treerock - Turtles and the Lindenmayer System</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="http://treerock.me/assets/favicon.ico">
  <link href="css/normalize.css" rel="stylesheet">
  <link href="css/project.sass.css" rel="stylesheet">
  <link href='http://fonts.googleapis.com/css?family=Vollkorn' rel='stylesheet' type='text/css'>
</head>

<body>
  <div class="page-wrapper">


    <header>
      <h1>Treerock</h1>
      <p class="sub"><span>Turtles, Dragons and Patterns</span>
      </p>
    </header>


    <!-- section one -->
    <h2>Turtles</h2>
    <p>Like a lot of 80s kids, my first introduction to programming was a toy called a <a href="https://en.wikipedia.org/wiki/Big_Trak">Big Trak</a>, which was a toy car that could be programmed with a route (3 forward, turn right, reverse 5 and so on) and would then follow that route (until it crashed into the skirting boards).</p>
    <p>To program something similar (aka a <a href="https://en.wikipedia.org/wiki/Turtle_graphics">Turtle</a>) you just needs to know a couple of actions: move and turn, while keeping track of current location and direction. With that you have a basic turtle.</p>
    <pre><code>function Turtle(){
  var location = [0,0]; // Set starting location 
  var angle = 0; // Angle is in radians
  var canvas = new Canvas(); // Need a canvas to draw on
  this.rotate = function(anglePercent) {
    angle += anglePercent * Math.PI *2;
  };
  this.forward = function(dist) {
    newLocation = [location[0]+ Math.cos(angle) * dist, 
            location[1]+ Math.sin(angle) * dist];
    canvas.draw(location, newLocation, pen);
    location = [newLocation[0], newLocation[1]];
  };
}
</code></pre>
    <p>In order to do this on a webpage we need something like the HTML <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">canvas</a> element and some code to help with drawing lines. Something like this works for me.</p>
    <pre><code>function Canvas(canvasId) {
    var canvas = document.getElementById(canvasId);
    var ctx = canvas.getContext('2d');
    var intId = null;
    var steps = 10;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    var count = 0;
    this.draw = function(start, end, pen) {
        ctx.strokeStyle = pen.colour;
        ctx.lineWidth = pen.width;
        ctx.beginPath();
        ctx.moveTo(start[0], start[1]);
        ctx.lineTo(end[0], end[1]);
        ctx.stroke();
    };
}
</code></pre>
    <p>Add in a few basic controls and you've got the beginnings of a turtle to play with.</p>
    <div class="canvas-wrapper" id="one">
      <canvas id="canvasone" width="450" height="300">
        <p>Canvas cannot be displayed.</p>
      </canvas>
      <div class="form-wrapper">
        <div class="buttons turtle-controls">
          <button name="left">Left</button>
          <button name="forward">Forward</button>
          <button name="right">Right</button>
        </div>
        <div class="buttons turtle-settings">
          <label for="distance">Line Length:</label>
          <input type="text" id="distance" name="distance" value="10">
          <br>
        </div>
        <div class="buttons turtle-actions">
          <button name="clear">Clear Drawing</button>
        </div>
      </div>
    </div>


    <!-- section two -->
    <p>But that's just the beginning. The cool thing about the Big Trak was the ability to program in a course and let it go off on it's own.</p>
    <p>One way of doing this is to set up a string of commands, each command mapping to an action e.g. F mean move forward. Then when we hit GO, the turtle reads each command in turn and follows the course set for it.</p>
    <p>This is a nice way of doing things because it makes it quite easy for us to generate the command string, and therefore the path of the turtle, programmatically. For example, I generated the following string of command with a small program. Try copying it into the Command Window input below and hitting go.</p>
    <pre><code>RFRRLFLRRLRFRLLFLRRLRFRRLFLRLLRFRLLFLRRLRFRRLFLRRLRFRLLFLRLLRFRRLFLRLLRFRLLFLRRLRFRRLFLRRLRFRLLFLRRLRFRRLFLRLLRFRLLFLRLLRFRRLFLRRLRFRLLFLRLLRFRRLFLRLLRFRLLFLRRLRFRRLFLRRLRFRLLFLRRLRFRRLFLRLLRFRLLFLRRLRFRRLFLRRLRFRLLFLRLLRFRRLFLRLLRFRLLFLRLLRFRRLFLRRLRFRLLFLRRLRFRRLFLRLLRFRLLFLRLLRFRRLFLRRLRFRLLFLRLLRFRRLFLRLLRFRLLFLR
</code></pre>
    <p>Try programming your Big Trak to do that!</p>
    <div class="canvas-wrapper" id="two">
      <canvas id="canvastwo" width="450" height="300">
        <p>Canvas cannot be displayed.</p>
      </canvas>
      <div class="form-wrapper">
        <div class="buttons turtle-queue">
          <label for="tt-string">Command Window:</label>
          <textarea id="tt-string" name="tt-string" value=""></textarea>
          <button name="add-left">Queue Left</button>
          <button name="add-forward">Queue Forward</button>
          <button name="add-right">Queue Right</button>
        </div>
        <div class="buttons turtle-settings">
          <label for="distance">Line Length:</label>
          <input type="text" id="tt-distance" name="distance" value="10">
          <br>
        </div>
        <div class="buttons turtle-actions">
          <button name="clear">Clear Drawing</button>
          <button name="tt-go">Go Draw It</button>
        </div>
      </div>
    </div>



    <!-- section three -->
    <p>The string of commands I generated was based on a pattern called a <a href="http://en.wikipedia.org/wiki/Dragon_curve">Dragon Curve</a>. It's one of many patterns that can be generated using Lindenmayer System or <a href="http://en.wikipedia.org/wiki/L-system">L-system</a>.</p>
    <p>L-Systems consist of alphabets of commands (like 'F' is the command for forward()). It starts with a basic string (the axiom) and a set of rules. These rules are repeatedly applied to the string to generate more and more complicated set of commands.</p>
    <p>For a dragon curve you start with the axiom 'FX' then apply the following rules:</p>
    <ul>
      <li>Replace F with null</li>
      <li>Replace X with X+YF+</li>
      <li>Replace Y with −FX−Y</li>
    </ul>
    <p>So the first few iterations look something like this:</p>
    <p>0: FX 1: X+YF+ 2: X+YF++−FX−Y+ 3: X+YF++−FX−Y++−X+YF+−−FX−Y+</p>
    <p>Where F stands for forward(), + stands for 'turn right' and - 'turn left'. (X and Y are used in the L-system but don't equate to any commands).</p>
    <div class="canvas-wrapper" id="three">
      <canvas id="canvasthree" width="450" height="300">
        <p>Canvas cannot be displayed.</p>
      </canvas>
      <div class="form-wrapper" id="ls-form">
        <div class="row clearfix">
          <div class="form-group rules buttons">
            <label for="ls-axiom">Axiom:</label>
            <input type="text" id="ls-axiom" value="">
            <br>
            <label for="ls-rule1">Rule One:</label>
            <input type="text" id="ls-rule1" class="rule" value="">
            <br>
            <label for="ls-rule2">Rule Two:</label>
            <input type="text" id="ls-rule2" class="rule" value="">
            <br>
            <label for="ls-rule3">Rule Three:</label>
            <input type="text" id="ls-rule3" class="rule" value="">
            <br>
            <label for="ls-rule4">Rule Four:</label>
            <input type="text" id="ls-rule4" class="rule" value="">
            <br>
            <label for="ls-rule5">Rule Five:</label>
            <input type="text" id="ls-rule5" class="rule" value="">
            <br>
          </div>
          <div class="form-group rules  buttons">
            <label for="distance">Line Length:</label>
            <input type="text" id="ls-distance" name="distance">
            <br>
            <label for="angle">Turn Angle:</label>
            <input type="text" id="ls-angle" name="angle">
            <br>
            <label for="iterations">Iterations:</label>
            <input type="text" id="ls-iterations" name="iterations">
            <br>
            <label for="iterations">Start Angle:</label>
            <input type="text" id="ls-start-angle" name="iterations">
            <input type="text" id="ls-x" name="position-x">
            <input type="text" id="ls-y" name="position-y">
          </div>
        </div>
        <div class="row clearfix">
          <div id="rule-list" class="turtle-radio buttons">
            <!-- holder for LS Rules Radio Selector-->
          </div>
        </div>
        <div class="row clearfix  buttons">
          <div class="form-group turtle-actions">
            <button name="clear">Clear Drawing</button>
            <button name="ls-go">Go Draw It</button>
          </div>
          <div class="turtle-info form-group">
            Command String Length:	<span id="string-length"></span>
            <br>Lines Drawn:	<span id="lines-drawn"></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- end page-wrapper -->
  <script src="js/mt.js"></script>
  <script src="js/page.js"></script>
  <script id="my-script"></script>
</body>

</html>
